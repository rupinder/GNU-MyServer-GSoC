<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>MyServer Documentation - Performance Tuning - www.myserverproject.net</title>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<link rel="stylesheet" type="text/css" href="../style/myserver.css" />
</head>
<body>
<table class="center" width="95%">
<tr>
<td class="center">
      <h1 class="title">PERFORMANCE TUNING</h1><br />
        
        Here you can see a few options you can set to tune the performance of 
        your webserver.<br />
      
<h2 class="title">Threads Tuning:</h2>
In the myserver.xml file you can setup the amount of threads MyServer will use. In the lines below, you configure the two configurable parameters <span class="code">NTHREADS_STATIC</span> and <span class="code">NTHREADS_MAX</span>, the first one is used to define number of threads always alive, the second one is used to define the highest number of threads that myserver can create:<br />

<br />
<br />

<span class="code">
&lt;NTHREADS_STATIC&gt;10&lt;/NTHREADS_STATIC&gt;<br />
&lt;NTHREADS_MAX&gt;10&lt;/NTHREADS_MAX&gt;
</span>

<br />
<br />
<h2 class="title">Buffer Size:</h2>
You can set  the size of the Buffers used by MyServer, by setting the line below, in the myserver.xml file:
<br />
<p class="code">
&lt;BUFFER_SIZE&gt;102400&lt;/BUFFER_SIZE&gt;<br />
</p>
<p>
Just change the default value 102400 to your desired number. Remember that, in fact, your buffer will be twice the value you set here (in Bytes), multiplied by the number of running threads.
<br />
<br />
<h2 class="title">Connection Timeout:</h2>

In <span class="code">myserver.xml</span>, you can set the timeout for client connections to your server, in the line below:
<br />
<br />
<p class="code">
&lt;CONNECTION_TIMEOUT&gt;60&lt;/CONNECTION_TIMEOUT&gt;<br />
</p>
<p>
The time unit is seconds. So, in the line above, if your client doesn't access your site for more than 60 seconds, the connection will be closed. Or if you prefer, set this value to 0 and you won't have HTTP Keep-Alive Connections.
<br />
<br />
<h2 class="title">Max Connections:</h2>
You can change the default maximum number of connections your webserver will accept, by changing the line below in <span class="code">myserver.xml</span>:<br />
<p class="code">
&lt;MAX_CONNECTIONS&gt;0&lt;/MAX_CONNECTIONS&gt;<br />
</p>
<p>
The default value 0 means you will accept infinite connections. Any other value will limit how many users will be accessing your server.

<br />
<br />
<h2 class="title">Max FastCGI Servers:</h2>
MyServer lets you configure the maximum number of FastCGI servers allowed to run, by changing the value in the line below, <span class="code">in myserver.xml</span>:<br />
<p class="code">
&lt;FASTCGI_MAX_SERVERS&gt;10&lt;/FASTCGI_MAX_SERVERS&gt;<br />
</p>
<p>

<h2 class="title">Setting CGI Timeout:</h2>

You can set the default timeout for your CGI scripts in MyServer by changing the value of the variable CGI_TIMEOUT in your <span class="code">myserver.xml</span> file.<br />
Just change the line below to fit your need:<br />
<p class="code">
&lt;CGI_TIMEOUT&gt;15&lt;/CGI_TIMEOUT&gt;<br />
</p>

<p>
The configuration above would mean you are setting the CGI Timeout to 15 seconds (unit is "seconds")

<br />
<br />
<h2 class="title">Setting data throttling:</h2>

You can set the data throttling rate for connections in MyServer (by default, it's disabled) by adding a line like the following:
<p class="code">
&lt;THROTTLING_RATE&gt;1024&lt;/THROTTLING_RATE&gt;<br />
</p>
<p>
(Unit is bytes/second)<br />
If that same line is available in <span class="code">virtualhosts.xml</span>, it will enable and configure data throttling for the corresponding virtual host.<br />
<br />

Also, you can configure the data throttling for individual directories, using these configurations in your security file:<br />
<p class="code">
&lt;USER NAME="Guest" PASS="" READ="TRUE" WRITE="TRUE" BROWSE="TRUE"<br />
        EXECUTE="TRUE" THROTTLING_RATE="1024"/&gt;<br />
</p>
<p>
With that, you'd enabling the trottling of 1024  bytes/second for the user Guest.<br />
If you add a line like the following, you will be enabling throttling for a file named "bigfile":<br />
<p class="code">
&lt;ITEM FILE="bigfile" READ="TRUE" WRITE="FALSE" EXECUTE="FALSE"<br />
        THROTTLING_RATE="1024" /&gt;<br />
You can also mix the two possibilities and set this configuration for a specified user on a single file:<br />
&lt;ITEM FILE="bigfile" READ="TRUE" WRITE="FALSE" EXECUTE="FALSE"&gt;<br />
&lt;USER NAME="Guest" PASS="" READ="TRUE" WRITE="TRUE" BROWSE="TRUE"<br />
        EXECUTE="TRUE" THROTTLING_RATE="1024"/&gt;<br />
&lt;/ITEM&gt;<br /><br />
</p>
<p>
This is the order of checking for data throttling configuration:<br />
<ol>
<li>User & file(USER attribute inside ITEM).</li>
<li>File(ITEM attribute).</li>
<li>User(USER attribute).</li>
<li>Virtual host(virtualhosts.xml file).</li>
<li>Server configuration(myserver.xml file).</li>
</ol>
<br />
<br />
<h2 class="title">Static files cache:</h2>
It is possible to configure a cache for static files, in this way it is not
needed to open a new file for each request but read directly from a buffer in
the memory. The cache is configured trough three values in myserver.xml. 
<br />
<span class="code">MAX_FILES_CACHE_SIZE</span> defines the max dimension in
bytes for the cache. A value of zero means the caching mechanism is not
used.<br />
<span class="code">MAX_FILE_CACHE_SIZE</span> defines the max dimension in
bytes for a file to be added in the cache. It is a good idea to put a limit
here and don't cache big files, the overhead caused by opening big files and
send them is unnoticeable, in addition it would be better to use the buffer for
many small files than few big ones. A value of zero means that this limit is
not used.<br />
<span class="code">MIN_FILE_CACHE_SIZE</span> defines the min dimension in
bytes for a file to be added in the cache. It is better to use a low value for
it. A value of zero means that this limit is not used.

<p class="code">
	&lt;MAX_FILES_CACHE_SIZE&gt;100000000000&lt;/MAX_FILES_CACHE_SIZE&gt;<br/>
	&lt;MAX_FILE_CACHE_SIZE&gt;100000&lt;/MAX_FILE_CACHE_SIZE&gt;<br/>
	&lt;MIN_FILE_CACHE_SIZE&gt;0&lt;/MIN_FILE_CACHE_SIZE&gt;<br/>
</p>

<br />
<br />

</td>
</tr>
</table>
</body>
</html>
